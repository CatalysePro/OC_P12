document.addEventListener("DOMContentLoaded",()=>{let n=document.querySelectorAll(".thumbnail"),i=document.getElementById("main-photo"),l=document.getElementById("photo-title"),r=document.getElementById("photo-description"),c=document.getElementById("api-usage"),s=document.getElementById("photo-legend"),d=document.getElementById("pie-chart"),u=document.getElementById("visit-website"),e=document.querySelector(".thumbnails-wrapper");var t=document.querySelector(".left-arrow"),o=document.querySelector(".right-arrow");let m=document.getElementById("expand-description"),a=document.getElementById("full-description-modal"),g=document.getElementById("full-description");var p=document.querySelector(".close-button_description");let f,h=0;function y(t){i.src=t.getAttribute("data-photo"),l.textContent=t.getAttribute("data-title");let e=t.getAttribute("data-description");var n=(e=(e=e.replace("Objectif :","<strong style='color: #989a9c;'><em>Objectif :</em></strong>")).replace("Actions & résultats :","<strong style='color: #989a9c;'><em>Actions & résultats :</em></strong>")).split("|").map(t=>`<p>${t.trim()}</p>`).join(""),n=(r.innerHTML=n,g.innerHTML=n,s.textContent=t.getAttribute("data-legend"),u.href=t.getAttribute("data-url"),t.getAttribute("data-chart").split(",").map(Number)),o=(n=n,f&&f.destroy(),o=["HTML5","CSS3 / SCSS","JavaScript","Autre"].slice(0,n.length),f=new Chart(d,{type:"pie",data:{labels:o,datasets:[{data:n,backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0"].slice(0,n.length)}]},options:{responsive:!0,aspectRatio:1,plugins:{legend:{display:!0,position:"bottom",labels:{boxWidth:20,fontSize:14,generateLabels:function(o){return o.data.labels.map((t,e)=>{var n=o.data.datasets[0];return{text:`${t}: ${n.data[e]}%`,fillStyle:n.backgroundColor[e]}})}}}}}}),r.scrollHeight>r.clientHeight?m.style.display="block":m.style.display="none",v(t),"true"===t.getAttribute("data-api"));c.checked=o;let a=document.querySelector(".tools_container").querySelectorAll(".logo_it_tools");a.forEach(t=>t.classList.remove("highlight")),t.getAttribute("data-tools").split(",").map(Number).forEach(t=>{a[t]&&a[t].classList.add("highlight")})}function L(t){h="left"===t?(h-1+n.length)%n.length:(h+1)%n.length;t=n[h];window.innerWidth<600?(e.scrollLeft=t.offsetLeft-e.offsetLeft,t.style.marginLeft="0"):e.scrollLeft=t.offsetLeft-e.offsetLeft-parseInt(window.getComputedStyle(t).marginLeft),n.forEach(t=>t.classList.remove("active")),t.classList.add("active"),y(t),v(t)}function v(t){n.forEach(t=>t.classList.remove("active")),t.classList.add("active")}function E(){a.style.display="none",document.removeEventListener("click",b)}function b(t){a.contains(t.target)||m.contains(t.target)||E()}n.forEach((t,e)=>{t.addEventListener("click",()=>{n.forEach(t=>t.classList.remove("active")),t.classList.add("active"),h=e,y(t)})}),t.addEventListener("click",()=>L("left")),o.addEventListener("click",()=>L("right")),m.addEventListener("click",t=>{t.stopPropagation(),a.style.display="block",document.addEventListener("click",b)}),p.addEventListener("click",E),window.addEventListener("click",t=>{t.target===a&&(a.style.display="none")}),y(n[0]),v(n[0])});